# Define variables
variables:
  RestoreBuildProjects: '**/*.csproj'
  BuildConfiguration: 'Release'  # Define the BuildConfiguration variable

# Specify the pool and agent
pool:
  vmImage: 'windows-latest'  # Specify the agent pool and image

steps:
  # Restore dependencies
  - task: DotNetCoreCLI@2
    displayName: 'Restore dependencies'
    inputs:
      command: restore
      projects: '$(RestoreBuildProjects)'

  # Build project
  - task: DotNetCoreCLI@2
    displayName: 'Build project'
    inputs:
      command: build
      projects: '$(RestoreBuildProjects)'
      arguments: '--configuration $(BuildConfiguration)'

  # Publish project
  - task: DotNetCoreCLI@2
    displayName: 'Publish project'
    inputs:
      command: publish
      publishWebProjects: true
      arguments: '--configuration $(BuildConfiguration) --output $(build.artifactstagingdirectory)'
      zipAfterPublish: true
